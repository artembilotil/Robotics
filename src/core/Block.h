#pragma once

/**
 * МОДУЛЬ: Block.h (ТЕТРИС ФІГУРА)
 * ═══════════════════════════════════════════════════════════════════════════
 * 
 * ВІДПОВІДАЛЬНІСТЬ: Представлення одного падаючого блока/фігури
 * 
 * Це найпростіший клас - просто КОНТЕЙНЕР для даних про блок!
 * Он не рухається сам, не малює себе, тільки ЗБЕРІГАЄ інформацію:
 *   - Яка форма (I, O, T, L, J, S, Z)?
 *   - Де він знаходиться (X, Y)?
 *   - Як він повернений (rotation)?
 * 
 * АНАЛОГІЯ: це як фото фігури - просто стаття інформації
 * 
 * ПРИНЦИП SOLID: Single Responsibility (Одна Відповідальність)
 * ═══════════════════════════════════════════════════════════════════════════
 * Блок ТІЛЬКИ зберігає дані.
 * Рух - робить BlockController
 * Малювання - робить GameRenderer
 * Перевірка колізій - робить GameField
 * 
 * Кожен клас робить ОДНЕ, але робить це добре!
 * 
 * ЩО ТАКЕ ShapePtr?
 * ═══════════════════════════════════════════════════════════════════════════
 * ShapePtr - це посилання на масив координат
 * 
 * Кожна Тетрис фігура = 4 квадрати в певному порядку
 * Наприклад, фігура "I" виглядає як:
 *   ██████ (4 квадрати в ряд)
 * 
 * В коді це представляють як массив з 4 точок:
 *   shape = { {0,0}, {1,0}, {2,0}, {3,0} }
 *   (точка 0,0), (точка 1,0), (точка 2,0), (точка 3,0)
 * 
 * ShapePtr = посилання на такий массив
 */

// TYPEDEF - це як синонім імені
// typedef const int (*ShapePtr)[2];
// Значить: ShapePtr = "посилання на const массив [2] int"
// Тобто: посилання на координати (X, Y) фігури
typedef const int (*ShapePtr)[2];

/**
 * КЛАС BLOCK - ОДНА ТЕТРИС ФІГУРА
 */
class Block {
public:
    // ────────────────────────────────────────────────────────────────────────
    // ПУБЛІЧНІ ДАНІ (доступні всім)
    // ────────────────────────────────────────────────────────────────────────
    // Просто зберігаємо інформацію про фігуру
    
    ShapePtr shape;        // Посилання на форму (I, O, T, L, J, S, Z)
                           // Приклад: {{0,0}, {1,0}, {2,0}, {3,0}} для "I"
    
    int x, y;              // ПОЗИЦІЯ блока на полі
                           // x = координата слівно (0-7)
                           // y = координата зверху вниз (0-31)
    
    int rotation;          // ВЕРСІЯ ПОВОРОТУ (0, 1, 2, 3)
                           // Кожна фігура може мати кілька варіантів повороту
                           // (деякі фігури мають менше версій)
    
    char type;             // ТИП ФІГУРИ (символ для ідентифікації)
                           // 'I' = пряма лінія
                           // 'O' = квадрат (не крутиться)
                           // 'T' = буква Т
                           // 'L' = буква L
                           // 'J' = буква J
                           // 'S' = хвиля вправо
                           // 'Z' = хвиля вліво

    // ────────────────────────────────────────────────────────────────────────
    // КОНСТРУКТОРИ (способи створення обєкту)
    // ────────────────────────────────────────────────────────────────────────
    
    /**
     * КОНСТРУКТОР БЕЗ ПАРАМЕТРІВ (default)
     * 
     * Використовується:  Block b;
     * Створює "пустий" блок з базовими значеннями
     */
    Block() 
        : shape(nullptr),    // Немає форми
          x(0),              // Позиція 0,0
          y(0), 
          rotation(0),       // Не повернений
          type('O') {}       // Тип "O" (квадрат)

    /**
     * КОНСТРУКТОР З ПАРАМЕТРАМИ
     * 
     * Використовується:  Block b(shape, 3, 5, 0, 'I');
     * Створює блок з заданими параметрами
     * 
     * Параметри:
     *   s = форма (посилання на масив координат)
     *   px = X позиція
     *   py = Y позиція
     *   rot = поточний поворот (0-3)
     *   t = тип ('I', 'O', 'T', 'L', 'J', 'S', 'Z')
     */
    Block(ShapePtr s, int px, int py, int rot, char t)
        : shape(s),         // Встановити форму
          x(px),            // Встановити X
          y(py),            // Встановити Y
          rotation(rot),    // Встановити поворот
          type(t) {}        // Встановити тип

    // ────────────────────────────────────────────────────────────────────────
    // БІЛЬШЕ НЕ ТРЕБА!
    // ────────────────────────────────────────────────────────────────────────
    // Block - це така "тупа" структура для даних
    // Всі операції з блоком (рух, поворот) роблять інші класи!
};

